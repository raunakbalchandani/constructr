; Supervisor configuration for Foreperson.ai
; Copy to: /etc/supervisor/conf.d/foreperson.conf
; Then run: sudo supervisorctl reread && sudo supervisorctl update

[program:foreperson-backend]
command=/bin/bash /opt/foreperson/deploy/start-backend.sh
directory=/opt/foreperson
user=ubuntu
autostart=true
autorestart=true
stopasgroup=true
killasgroup=true
stderr_logfile=/opt/foreperson/logs/backend.err.log
stdout_logfile=/opt/foreperson/logs/backend.out.log

[program:foreperson-frontend]
command=/usr/bin/node .next/standalone/server.js
directory=/opt/foreperson/frontend
user=ubuntu
autostart=true
autorestart=true
stopasgroup=true
killasgroup=true
stderr_logfile=/opt/foreperson/logs/frontend.err.log
stdout_logfile=/opt/foreperson/logs/frontend.out.log
environment=
    NODE_ENV="production",
    PORT="3000"

[group:foreperson]
programs=foreperson-backend,foreperson-frontend
priority=999
